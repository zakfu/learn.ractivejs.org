<!DOCTYPE html>
<head>
	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>

	<title>Ractive.js tutorials | Animation | part 3</title>

	<link rel='icon' type='image/png' href='../../assets/favicon.png'>
	<link rel='stylesheet' href='../../min.css'>

	<!--[if lte IE 8]>
		<script src='../../assets/respond.min.js'></script>
		<script src='../../assets/html5shiv.min.js'></script>
	<![endif]-->
</head>

<body>
	<nav>
	<div class='nav-inner'>
		<a href='http://ractivejs.org'>Ractive.js</a>

		<ul>
			<li><a href='http://ractivejs.org/60-second-setup'>60 second setup</a></li>
			<li class="selected"><a href='http://learn.ractivejs.org'>Tutorials</a></li>
			<li><a href='http://examples.ractivejs.org'>Examples</a></li>
			<li><a href='http://docs.ractivejs.org'>Docs</a></li>
			<li><a href='http://docs.ractivejs.org/latest/plugins'>Plugins</a></li>
			<li><a href='http://blog.ractivejs.org'>Blog</a></li>
			<li class='github-small'><a href='https://github.com/ractivejs/ractive'>GitHub</a></li>
		</ul>

		<a class='github-wide' href='https://github.com/ractivejs/ractive'>GitHub</a>

		<button id='nav-toggle'>&#9776;</button>
	</div>
</nav>


	<div class='app-container'>
		<p class='loading'>loading...</p>
	</div>

	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-5602942-2', 'learn.ractivejs.org');
	ga('send', 'pageview');
</script>


	<script>
		window.TUTORIAL_DATA = {
			manifest: [{"title":"Hello world!","numSteps":5},{"title":"Nested properties","numSteps":3},{"title":"Expressions","numSteps":3},{"title":"Event proxies","numSteps":4},{"title":"Conditional sections","numSteps":2},{"title":"List sections","numSteps":5},{"title":"Triples (embedded HTML)","numSteps":1},{"title":"Extending Ractive","numSteps":2},{"title":"Two-way binding","numSteps":4},{"title":"Partials","numSteps":2},{"title":"Animation","numSteps":3},{"title":"SVG","numSteps":3},{"title":"Transitions\n","numSteps":3},{"title":"Coming soon...\n","numSteps":1}],

			// initial tutorial on page load
			step: {"copy":"<p>Alongside <code>easing</code>, there are several other options you can pass in when creating an animation:</p>\n\n<pre class='prettyprint lang-js'>\nthis.animate( 'selectedCity', cities[ index ], {\n  easing: 'easeOut',\n  duration: 300, // in milliseconds - default 400\n  step: function ( t, value ) {\n    // function that will be called immediately after\n    // each step of the animation loop.\n    //\n    // `t` is a value between 0 (start) and 1 (end),\n    // as determined by the easing function.\n    //\n    // `value` is the intermediate value\n  },\n  complete: function ( t, value ) {\n    // function that will be called when the animation\n    // completes - same function signature as `step`,\n    // except `t` is always 1\n  }\n});\n</pre>\n\n<p>Try using <code>ractive.animate()</code> to cycle the bar chart through a loop &ndash; each city's data is displayed for a couple of seconds before transitioning to the next one. To make it simple, the <code>&lt;select&gt;</code> has been removed. If you get stuck, use the 'fix code' button to see one possible solution.</p>\n\n<aside>\n\t<p>You can animate between numerical properties, and arrays or objects that contain numerical properties (nested however deep &ndash; though be aware that <span class='logo'>Ractive.js</span> doesn't check for cyclical data structures which will cause infinite loops!).</p>\n\n\t<p>Strings, such as the city's <code>name</code> in this example, are ignored, or rather set immediately on the first animation tick. (Future versions may include clever string interpolators à la <a href='http://d3js.org/'>D3</a>.</p>\n</aside>\n","javascript":"getJSON( '/temperature.json' ).then( function ( cities ) {\n  ractive.set( 'cities', cities );\n\n  // when the user makes a selection from the drop-down, update the chart\n  ractive.observe( 'selectedIndex', function ( index ) {\n    this.animate( 'selectedCity', cities[ index ], {\n      easing: 'easeOut'\n    });\n  });\n});\n\nvar ractive = new Ractive({\n  el: output,\n  template: template,\n  data: {\n    // For readability, these have been pre-defined.\n    // Refer to step 1 to see their implementations\n    scale: scale,\n    format: format,\n    getColor: getColor,\n    monthNames: monthNames,\n    selectedIndex: 0\n  }\n});\n","template":"<div class='temperatures'>\n\n  <!-- header and options -->\n  <div class='header'>\n    <h2>Average high and low temperature</h2>\n\n    <!-- switch between celsius and fahrenheit -->\n    <div class='radio-group'>\n      <label>°C <input type='radio' name='{{degreeType}}' value='celsius' checked></label>\n      <label>°F <input type='radio' name='{{degreeType}}' value='fahrenheit'></label>\n    </div>\n\n    <p>{{selectedCity.name}}</p>\n  </div>\n\n  <!-- the chart -->\n  <div class='bar-chart'>\n    {{#with selectedCity}}\n\n      <!-- 12 sections, one for each month -->\n      {{#each months:i}}\n        <div class='bar-group' style='width: {{ 100 / months.length }}%;'>\n\n          <!-- average high temperature -->\n          <div class='bar-outer high {{ (high >= 0) ? \"positive\" : \"negative\" }}' style='height: {{ scale(high) }}%;'>\n            <div class='bar-inner' style='background-color: {{ getColor(high) }};'></div>\n            <span>{{ format(high) }}</span>\n          </div>\n\n\n          <!-- average low temperature -->\n          <div class='bar-outer low {{ (low >= 0) ? \"positive\" : \"negative\" }}' style='height: {{ scale(low) }}%;'>\n            <div class='bar-inner' style='background-color: {{ getColor(low) }};'></div>\n            <span>{{ format(low) }}</span>\n          </div>\n\n          <!-- month label (JFMAMJJASOND) -->\n          <span class='month-label'>{{ monthNames[i] }}</span>\n        </div>\n      {{/each}}\n    {{/with}}\n\n    <!-- horizontal line representing freezing -->\n    <div class='axis'></div>\n  </div>\n</div>\n","init":true,"fixed":{"javascript":"getJSON( '/temperature.json' ).then( function ( cities ) {\n  ractive.set( 'cities', cities );\n\n  // when the user makes a selection from the drop-down, update the chart\n  ractive.observe( 'selectedIndex', function ( index ) {\n    this.animate( 'selectedCity', cities[ index ], {\n      easing: 'easeOut',\n      complete: function () {\n        setTimeout( function () {\n          ractive.set( 'selectedIndex', ( index + 1 ) % cities.length );\n        }, 1000 );\n      }\n    });\n  });\n});\n\nvar ractive = new Ractive({\n  el: output,\n  template: template,\n  data: {\n    // For readability, these have been pre-defined.\n    // Refer to step 1 to see their implementations\n    scale: scale,\n    format: format,\n    getColor: getColor,\n    monthNames: monthNames,\n    selectedIndex: 0\n  }\n});\n"},"index":2,"numSiblings":3,"tutorialTitle":"Animation","tutorialIndex":10,"styles":"#output-block h2 {\n\tmargin: 0 0 0.5em 0;\n}\n\n#output-block svg {\n\twidth: 100%;\n\theight: 100%;\n}\n\n#output-block .temperatures {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 4em 0 0 0;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n\n#output-block .header {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 2em;\n}\n\n#output-block .radio-group {\n\tdisplay: inline-block;\n\tfloat: right;\n\ttext-align: right;\n\tpadding: 0.5em 0 0 0;\n}\n\n#output-block .header h2 {\n\tfloat: left;\n\tmargin: 0;\n}\n\n#output-block .header select {\n\tposition: relative;\n\ttop: 0.1em;\n\tfloat: left;\n\tclear: left;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tz-index: 7;\n}\n\n#output-block .header label {\n\tposition: relative;\n\tz-index: 7;\n}\n\n#output-block .header p {\n\tfloat: left;\n\tclear: left;\n\tmargin: 0;\n}\n\n#output-block .bar-chart {\n\tposition: relative;\n\tpadding: 0 0 3em 0;\n\twidth: 100%;\n\theight: 100%;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n#output-block .bar-group {\n\tposition: relative;\n\tfloat: left;\n\theight: 100%;\n\ttext-align: center;\n}\n\n#output-block .month-label {\n\tposition: absolute;\n\tbottom: -2em;\n\tleft: 0;\n\twidth: 100%;\n}\n\n#output-block .bar-outer {\n\tposition: absolute;\n\twidth: 100%;\n\tpadding: 0 1px;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n#output-block .bar-outer.positive {\n\tbottom: 20%;\n}\n\n#output-block .bar-outer.positive .bar-inner {\n\tbottom: 0;\n\tborder-top: 1px solid #333;\n\tborder-left: 1px solid #333;\n\tborder-right: 1px solid #333;\n\tborder-radius: 2px 2px 0 0;\n}\n\n#output-block .bar-outer.negative {\n\ttop: 80%;\n}\n\n#output-block .bar-outer.negative .bar-inner {\n\ttop: 0;\n\tborder-bottom: 1px solid #333;\n\tborder-left: 1px solid #333;\n\tborder-right: 1px solid #333;\n\tborder-radius: 0 0 2px 2px;\n}\n\n#output-block .bar-outer.high.negative {\n\tz-index: 6;\n}\n\n#output-block .bar-inner {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n#output-block .high.positive span {\n\ttop: -0.6em;\n\tfont-weight: bold;\n}\n\n#output-block .low.positive span {\n\ttop: 0.8em;\n\tcolor: white;\n\ttext-shadow: 0 0 3px rgba(0,0,0,1), 0 0 3px rgba(0,0,0,1), 0 0 3px rgba(0,0,0,1);\n}\n\n#output-block .high.negative span {\n\tbottom: 0.8em;\n\tcolor: white;\n\ttext-shadow: 0 0 3px rgba(0,0,0,1), 0 0 3px rgba(0,0,0,1), 0 0 3px rgba(0,0,0,1);\n}\n\n#output-block .low.negative span {\n\tbottom: -0.6em;\n\tfont-weight: bold;\n}\n\n#output-block .bar-chart span {\n\tposition: absolute;\n\twidth: 100%;\n\tleft: 0;\n\tfont-family: 'Helvetica Neue', Arial;\n\tfont-size: 0.7em;\n\tline-height: 0;\n\tz-index: 6;\n}\n\n#output-block .axis {\n\tposition: relative;\n\twidth: 100%;\n\theight: 0;\n\tborder-top: 1px solid #333;\n\tz-index: 5;\n\tleft: 0;\n\ttop: 80%;\n}\n","setup":"(function () {\n\tvar promises = {};\n\n\twindow.getJSON = function ( url ) {\n\t\tif ( !promises[ url ] ) {\n\t\t\tpromises[ url ] = new Ractive.Promise( function ( fulfil ) {\n\t\t\t\tvar xhr = new XMLHttpRequest();\n\n\t\t\t\txhr.onload = function () {\n\t\t\t\t\tfulfil( JSON.parse( xhr.responseText ) );\n\t\t\t\t};\n\n\t\t\t\txhr.open( 'GET', url );\n\t\t\t\txhr.send();\n\t\t\t});\n\t\t}\n\n\t\treturn promises[ url ];\n\t};\n}());\n\nwindow.scale = function ( val ) {\n\t// quick and dirty...\n\treturn 2 * Math.abs( val );\n};\n\nwindow.format = function ( val ) {\n  // Pro-tip: we're using `this.get()` inside this function -\n  // as a result, Ractive knows that this computation depends\n  // on the value of `degreeType` as well as `val`\n  if ( this.get( 'degreeType' ) === 'fahrenheit' ) {\n    // convert celsius to fahrenheit\n    val = ( val * 1.8 ) + 32;\n  }\n\n  return val.toFixed( 1 ) + '°';\n};\n\nwindow.getColor = function ( val ) {\n  // quick and dirty function to pick a colour - the higher the\n  // temperature, the warmer the colour\n  var r = Math.max( 0, Math.min( 255, Math.floor( 2.56 * ( val + 50 ) ) ) );\n  var g = 100;\n  var b = Math.max( 0, Math.min( 255, Math.floor( 2.56 * ( 50 - val ) ) ) );\n\n  return 'rgb(' + r + ',' + g + ',' + b + ')';\n};\n\nwindow.monthNames = [ 'J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D' ];\n","cleanup":"delete window.getJSON;\ndelete window.scale;\ndelete window.format;\ndelete window.getColor;\ndelete window.monthNames;\n"}
		};
	</script>

	<script src='../../bundle.js'></script>
	<script src='../../app.js'></script>

	<script src='../../js/snippets/nav.js'></script>
</body>
