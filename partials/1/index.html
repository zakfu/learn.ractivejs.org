<!DOCTYPE html>
<head>
	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>

	<title>Ractive.js tutorials | Partials | part 1</title>

	<link rel='icon' type='image/png' href='../../assets/favicon.png'>
	<link rel='stylesheet' href='../../min.css'>

	<!--[if lte IE 8]>
		<script src='../../assets/respond.min.js'></script>
		<script src='../../assets/html5shiv.min.js'></script>
	<![endif]-->
</head>

<body>
	<nav>
	<div class='nav-inner'>
		<a href='http://ractivejs.org'>Ractive.js</a>

		<ul>
			<li><a href='http://ractivejs.org/60-second-setup'>60 second setup</a></li>
			<li class="selected"><a href='http://learn.ractivejs.org'>Tutorials</a></li>
			<li><a href='http://examples.ractivejs.org'>Examples</a></li>
			<li><a href='http://docs.ractivejs.org'>Docs</a></li>
			<li><a href='http://docs.ractivejs.org/latest/plugins'>Plugins</a></li>
			<li><a href='http://blog.ractivejs.org'>Blog</a></li>
			<li class='github-small'><a href='https://github.com/ractivejs/ractive'>GitHub</a></li>
		</ul>

		<a class='github-wide' href='https://github.com/ractivejs/ractive'>GitHub</a>

		<button id='nav-toggle'>&#9776;</button>
	</div>
</nav>


	<div class='app-container'>
		<p class='loading'>loading...</p>
	</div>

	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-5602942-2', 'learn.ractivejs.org');
	ga('send', 'pageview');
</script>


	<script>
		window.TUTORIAL_DATA = {
			manifest: [{"title":"Hello world!","numSteps":5},{"title":"Nested properties","numSteps":3},{"title":"Expressions","numSteps":3},{"title":"Event proxies","numSteps":4},{"title":"Conditional sections","numSteps":2},{"title":"List sections","numSteps":5},{"title":"Triples (embedded HTML)","numSteps":1},{"title":"Extending Ractive","numSteps":2},{"title":"Two-way binding","numSteps":4},{"title":"Partials","numSteps":2},{"title":"Animation","numSteps":3},{"title":"SVG","numSteps":3},{"title":"Transitions\n","numSteps":3},{"title":"Coming soon...\n","numSteps":1}],

			// initial tutorial on page load
			step: {"copy":"<p>Partials are a good way to split complex templates up into several more manageable files. Take this todo list, for example. It's not too bad, but the template would look neater if we could separate out the code for an individual item.</p>\n\n<p>Well, we can. Add this above the rest of the JavaScript:</p>\n\n<pre class='prettyprint lang-js'>\nvar item = \"&lt;li class='{{ done ? \\\"done\\\" : \\\"pending\\\" }}'&gt;\" +\n             \"&lt;input type='checkbox' checked='{{done}}'&gt;\" +\n             \"&lt;span on-tap='edit'&gt;\" +\n               \"{{description}}\" +\n\n               \"{{#if editing}}\" +\n                 \"&lt;input class='edit' \" +\n                          \"value='{{description}}' \" +\n                          \"on-blur='stop_editing'&gt;\" +\n               \"{{/if}}\" +\n             \"&lt;/span&gt;\" +\n             \"&lt;a class='button' on-tap='remove'&gt;x&lt;/a&gt;\" +\n           \"&lt;/li&gt;\";\n</pre>\n\n<p>Then, in the main template we replace all that with a partial, which looks like a regular mustache but with a <code>&gt;</code> character:</p>\n\n<pre class='prettyprint lang-html'>\n&lt;ul class='todos'&gt;\n  {{#items:i}}\n    {{&gt;item}}\n  {{/items}}\n&lt;/ul&gt;\n</pre>\n\n<p>Finally, we need to add the partial when we define our <code>TodoList</code>:</p>\n\n<pre class='prettyprint lang-js'>\nvar TodoList = Ractive.extend({\n  template: template,\n  partials: { item: item },\n  // etc...\n});\n</pre>\n\n<p>Execute this code.</p>\n","init":true,"javascript":"var TodoList = Ractive.extend({\n  template: template,\n\n  // Add the 'item' partial here\n  partials: {},\n\n  addItem: function ( description ) {\n    this.push( 'items', {\n      description: description,\n      done: false\n    });\n  },\n\n  removeItem: function ( index ) {\n  \tthis.splice( 'items', index, 1 );\n  },\n\n  editItem: function ( index ) {\n    var self = this, keydownHandler, blurHandler, input, currentDescription;\n\n    currentDescription = this.get( 'items.' + index + '.description' );\n    this.set( 'items.' + index + '.editing', true );\n\n    input = this.find( '.edit' );\n    input.select();\n\n    window.addEventListener( 'keydown', keydownHandler = function ( event ) {\n      switch ( event.which ) {\n        case 13: // ENTER\n        input.blur();\n        break;\n\n        case 27: // ESCAPE\n        input.value = currentDescription;\n        self.set( 'items.' + index + '.description', currentDescription );\n        input.blur();\n        break;\n\n        case 9: // TAB\n        event.preventDefault();\n        input.blur();\n        self.editItem( ( index + 1 ) % self.get( 'items' ).length );\n        break;\n      }\n    });\n\n    input.addEventListener( 'blur', blurHandler = function () {\n      window.removeEventListener( 'keydown', keydownHandler );\n      input.removeEventListener( 'blur', blurHandler );\n    });\n\n    this.set( 'items.' + index + '.editing', true );\n  },\n\n  init: function ( options ) {\n    var self = this;\n\n    // proxy event handlers\n    this.on({\n      remove: function ( event ) {\n        this.removeItem( event.index.i );\n      },\n      newTodo: function ( event ) {\n        this.addItem( event.node.value );\n        event.node.value = '';\n        setTimeout( function () {\n          event.node.focus();\n        }, 0 );\n      },\n      edit: function ( event ) {\n        this.editItem( event.index.i );\n      },\n      stop_editing: function ( event ) {\n        this.set( event.keypath + '.editing', false );\n      },\n      blur: function ( event ) {\n        event.node.blur();\n      }\n    });\n  },\n\n  // sadly this is necessary for IE - other browsers fire the change event\n  // when you hit enter\n  events: {\n    enter: function ( node, fire ) {\n      var keydownHandler = function ( event ) {\n        var which = event.which || event.keyCode;\n        which === 13 && fire({ node: node, original: event });\n      };\n\n      node.addEventListener( 'keydown', keydownHandler );\n\n      return {\n        teardown: function () {\n          node.removeEventListener( 'keydown', keydownHandler );\n        }\n      };\n    }\n  }\n});\n\nvar ractive = new TodoList({\n  el: output,\n  data: {\n    items: [\n      { done: true,  description: 'Add a todo item' },\n      { done: false, description: 'Add some more todo items' },\n      { done: false, description: 'Complete all the Ractive tutorials' }\n    ]\n  }\n});\n","template":"<h2>To-do list</h2>\n\n<input on-change='newTodo' on-enter='blur' placeholder='What needs to be done?'>\n\n<ul class='todos'>\n  {{#each items:i}}\n    <li class='{{ done ? \"done\" : \"pending\" }}'>\n      <input type='checkbox' checked='{{done}}'>\n      <span class='description' on-tap='edit'>\n        {{description}}\n\n        {{#if editing}}\n          <input class='edit'\n                 value='{{description}}'\n                 on-blur='stop_editing'>\n        {{/if}}\n      </span>\n      <span class='button' on-tap='remove'>x</span>\n    </li>\n  {{/each}}\n</ul>\n","fixed":{"javascript":"var item = \"<li class='{{ done ? \\\"done\\\" : \\\"pending\\\" }}'>\" +\n             \"<input type='checkbox' checked='{{done}}'>\" +\n             \"<span on-tap='edit'>\" +\n               \"{{description}}\" +\n\n               \"{{#if editing}}\" +\n                 \"<input class='edit' \" +\n                        \"value='{{description}}' \" +\n                        \"on-blur='stop_editing'>\" +\n               \"{{/if}}\" +\n             \"</span>\" +\n             \"<a class='button' on-tap='remove'>x</a>\" +\n           \"</li>\";\n\nvar TodoList = Ractive.extend({\n  template: template,\n\n  partials: { item: item },\n\n  addItem: function ( description ) {\n    this.push( 'items', {\n      description: description,\n      done: false\n    });\n  },\n\n  removeItem: function ( index ) {\n    this.splice( 'items', index, 1 );\n  },\n\n  editItem: function ( index ) {\n    var self = this, keydownHandler, blurHandler, input, currentDescription;\n\n    currentDescription = this.get( 'items.' + index + '.description' );\n    this.set( 'items.' + index + '.editing', true );\n\n    input = this.find( '.edit' );\n    input.select();\n\n    window.addEventListener( 'keydown', keydownHandler = function ( event ) {\n      switch ( event.which ) {\n        case 13: // ENTER\n        input.blur();\n        break;\n\n        case 27: // ESCAPE\n        input.value = currentDescription;\n        self.set( 'items.' + index + '.description', currentDescription );\n        input.blur();\n        break;\n\n        case 9: // TAB\n        event.preventDefault();\n        input.blur();\n        self.editItem( ( index + 1 ) % self.get( 'items' ).length );\n        break;\n      }\n    });\n\n    input.addEventListener( 'blur', blurHandler = function () {\n      window.removeEventListener( 'keydown', keydownHandler );\n      input.removeEventListener( 'blur', blurHandler );\n    });\n\n    this.set( 'items.' + index + '.editing', true );\n  },\n\n  init: function ( options ) {\n    var self = this;\n\n    // proxy event handlers\n    this.on({\n      remove: function ( event ) {\n        this.removeItem( event.index.i );\n      },\n      newTodo: function ( event ) {\n        this.addItem( event.node.value );\n        event.node.value = '';\n        setTimeout( function () {\n          event.node.focus();\n        }, 0 );\n      },\n      edit: function ( event ) {\n        this.editItem( event.index.i );\n      },\n      stop_editing: function ( event ) {\n        this.set( event.keypath + '.editing', false );\n      },\n      blur: function ( event ) {\n        event.node.blur();\n      }\n    });\n  },\n\n  // sadly this is necessary for IE - other browsers fire the change event\n  // when you hit enter\n  events: {\n    enter: function ( node, fire ) {\n      var keydownHandler = function ( event ) {\n        var which = event.which || event.keyCode;\n        which === 13 && fire({ node: node, original: event });\n      };\n\n      node.addEventListener( 'keydown', keydownHandler );\n\n      return {\n        teardown: function () {\n          node.removeEventListener( 'keydown', keydownHandler );\n        }\n      };\n    }\n  }\n});\n\nvar ractive = new TodoList({\n  el: output,\n  data: {\n    items: [\n      { done: true,  description: 'Add a todo item' },\n      { done: false, description: 'Add some more todo items' },\n      { done: false, description: 'Complete all the Ractive tutorials' }\n    ]\n  }\n});\n","template":"<h2>To-do list</h2>\n\n<input on-change='newTodo' on-enter='blur' placeholder='What needs to be done?'>\n\n<ul class='todos'>\n  {{#each items:i}}\n    {{>item}}\n  {{/each}}\n</ul>\n"},"index":0,"numSiblings":2,"tutorialTitle":"Partials","tutorialIndex":9,"styles":"#output-block input {\n\twidth: 100%;\n\tmax-width: 20em;\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tpadding: 0.4em;\n\toutline: none;\n\tborder: 1px solid #ccc;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n#output-block input:focus {\n\tbox-shadow: inset 1px 1px rgba(0,0,0,0.08);\n\tbackground-color: #f4f4f4;\n}\n\n#output-block li .edit {\n\tposition: absolute;\n\twidth: 100%;\n\tleft: -0.2em;\n\ttop: -0.2em;\n\tpadding: 0.2em;\n\tborder: none;\n}\n\n#output-block li input[type=\"checkbox\"] {\n\tposition: absolute;\n\tpadding: 0;\n\tmargin: 0;\n\tleft: 0.5em;\n\ttop: 0.7em;\n\tborder: none;\n\twidth: auto;\n}\n\n#output-block .todos {\n\tpadding: 0;\n\tborder-top: 1px solid #f0f0f0;\n\tmax-width: 20em;\n}\n\n#output-block .todos li {\n\tposition: relative;\n\tpadding: 0.5em 3em 0.5em 2em;\n\tlist-style: none;\n\tborder-bottom: 1px solid #eee;\n\tmargin: 0;\n\tmin-height: 1em;\n}\n\n#output-block .todos span {\n\tposition: relative;\n\tdisplay: block;\n\tcursor: pointer;\n}\n\n#output-block li.done .description {\n\topacity: 0.5;\n\ttext-decoration: line-through;\n}\n\n#output-block .todos .button {\n\tposition: absolute;\n\tright: 0.5em;\n\twidth: 1em;\n\ttext-align: center;\n\ttop: 0.7em;\n\tbackground-color: #d00;\n\tborder: none;\n\topacity: 0.3;\n\tline-height: 1;\n\tcolor: white;\n}\n\n#output-block .todos li:hover {\n\tbackground-color: #f9f9f9;\n}\n\n#output-block .todos li:hover .button {\n\topacity: 1;\n}\n"}
		};
	</script>

	<script src='../../bundle.js'></script>
	<script src='../../app.js'></script>

	<script src='../../js/snippets/nav.js'></script>
</body>
